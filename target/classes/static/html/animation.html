<style type="text/css">
    .result-block {
        height: 300px;
    }

    .result-img {
        height: 200px;
    }

    .result-title {
        overflow: auto;
        height: 22px;
    }

    .result-tag {
        overflow: auto;
        height: 22px;
    }
</style>
<div ng-controller="animationCtrl">
    <form id="downloadForm" style="display: none;" method="get" target="_blank" action="/file/download">
        <input type="hidden" name="index" value=""/>
        <input type="hidden" name="subIndex" value=""/>
    </form>

    <div class="row">
        <div class="col-sm-4">
            <button class="btn btn-primary" ng-click="testVideo()">观看测试视频</button>
        </div>
        <div class="col-sm-4">
            <input type="text" class="form-control input-lg" id="exampleInputName2" ng-model="searchValue"
                   ng-change="search()" ng-blur="loadTag(0)" ng-focus="closeDetail()" placeholder="请在此键入搜索关键字"/>
        </div>
        <div class="col-sm-4"></div>
    </div>
    <div class="row">
        <p>&nbsp;</p>
        <p>&nbsp;</p>
    </div>
    <div class="row">
        <div class="col-xs-12" id="result-area">
            <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-3 col-xs-6 result-block" ng-repeat="x in rootFileIndex"
                     ng-click="getDetail(x)">
                    <div class="thumbnail">
                        <img src="/static/img/1.jpg" class="img-responsive img-rounded"
                             alt="暂无封面">
                        <div class="caption">
                            <p class="result-title">{{ x.name }}</p>
                            <p class="result-tag">
                                <button type="button" ng-repeat="y in x.tags" class="btn btn-primary btn-xs">{{ y.name
                                    }}
                                </button>
                                <button type="button" class="btn btn-success btn-xs" ng-click="addTag(x.id)">
                                    <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>临时占位
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-4 hidden" id="detail-area">
            <div class="row">
                <div class="col-xs-9">
                    <P class="lead">{{checkedNode.name}}</P>
                </div>
                <div class="col-xs-3">
                    <button class="btn btn-sm btn-danger  pull-right" ng-click="closeDetail()">
                        <span class=" glyphicon glyphicon-remove" aria-hidden="true"></span>
                    </button>
                </div>
            </div>
            <p>
                <button type="button" ng-repeat="y in checkedNode.tags" class="btn btn-primary btn-xs">{{ y.name }}
                </button>
                <button type="button" class="btn btn-success btn-xs" ng-click="addTag(checkedNode.id)">
                    <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
                </button>
            </p>
            <div class="row table-responsive" style="max-height: 600px;overflow:auto;">
                <table class="table table-hover table-condensed">
                    <tr>
                        <td class="col-sm-6">文件名</td>
                        <td class="col-sm-3">是否文件</td>
                        <td class="col-sm-3">大小</td>
                    </tr>
                    <tr ng-repeat="x in subFileIndex">
                        <td class="col-sm-6">{{ x.name }}</td>
                        <td class="col-sm-3">{{ x.file }}
                            <button type="button" class="btn btn-xs btn-success" ng-if="x.file"
                                    ng-click="download(x.name)">
                                <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span>
                            </button>
                            <button type="button" class="btn btn-xs btn-success" ng-if="x.file" ng-click="play(x.name)">
                                <span class="glyphicon glyphicon-play" aria-hidden="true"></span>
                            </button>
                        </td>
                        <td class="col-sm-3">{{ x.size }}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <!--tag添加/删除框-->
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="tagAddModalLabel" id="tagAddModal"
         data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" ng-click="closeAdd()"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="tagAddModalLabel">标签操作</h4>
                </div>
                <div class="modal-body">
                    <p> 所有标签，单击以添加 </p>
                    <p ng-repeat="x in allTags">
                        <button type="button" class="btn" ng-repeat="y in x" ng-click="addTagConfirm(y.id)"
                                ng-class="{'btn-primary':y.type==1,'btn-success':y.type==2,'btn-info':y.type==3,'btn-warning':y.type==4,'btn-danger':y.type>=5}">
                            {{ y.name }}
                        </button>
                    </p>
                    <hr/>
                    <p> 当前标签，单击以删除 </p>
                    <hr/>
                    <p>
                        <button type="button" class="btn" ng-repeat="x in thisTags" ng-click="delTagConfirm(x.id)"
                                ng-class="{'btn-primary':x.type==1,'btn-success':x.type==2,'btn-info':x.type==3,'btn-warning':x.type==4,'btn-danger':x.type>=5}">
                            {{ x.name }}
                        </button>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" ng-click="closeAdd()">关闭</button>
                </div>
            </div>
        </div>
    </div>
    <!--播放器-->
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="videoModal"
         data-backdrop="static">
        <div class="modal-dialog modal-lg" role="document" style="width:95%;">
            <div class="modal-content">
                <div class="embed-responsive embed-responsive-16by9" id="mediaPlayerArea">
                </div>
            </div>
        </div>
    </div>

    <div class="alert alert-info" role="alert" id="videoAlert"
         style="position:absolute;top:50%;left:50%;height:50px;width:400px;margin-top:-100px;margin-left:-200px;display:none;z-index:10000;">
        按ESC退出播放器
    </div>
</div>